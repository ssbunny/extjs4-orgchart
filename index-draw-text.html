<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Test</title>
    <link rel="stylesheet" href="ext-theme-classic-all-debug.css">
    <style>
        body {
            padding: 0;
            margin: 0
        }

        #foo {
            position: relative;
            height: 100px;
            border-bottom: 1px solid #8c8c8c;
        }

        #foo div {
            position: absolute;
            bottom: 0;
            height: 20px;
            border-right: 1px solid #8c8c8c;
        }
    </style>
</head>
<body>
<div id="foo">
    <div style="left: 100px"></div>
    <div style="left: 200px"></div>
    <div style="left: 300px"></div>
</div>
<div id="bar"></div>
<script type="text/javascript" src="ext-all-debug.js"></script>
<script type="text/javascript" src="ext-lang-zh_CN.js"></script>
<script>
    Ext.onReady(function () {

        var drawComponent = Ext.create('Ext.draw.Component', {
            width: 400,
            height: 200,
            viewBox: false,
            renderTo: Ext.get('bar')
        }), surface = drawComponent.surface;

        surface.add([{
            type: 'rect',
            width: 20,
            height: 20,
            fill: '#00f',
            x: 100,
            y: 1,
            group: 'rectangles'
        }]);

        rectangles = surface.getGroup('rectangles');

        console.log('-1-> ', rectangles.items[0].getBBox().x);
        rectangles.animate({
            duration: 500,
            to: {
                x: 200
            },
            listeners: {
                afteranimate: function () {
                    console.log('-2-> ', rectangles.getBBox().x);
                    /*rectangles.setAttributes({
                     x: rectangles.getBBox().x
                     }, false);*/
                }
            }
        });

        setTimeout(function () {
            console.log('-3-> ', rectangles.items[0].getBBox().x);
            rectangles.animate({
                duration: 500,
                to: {
                    x: 300
                },
                listeners: {
                    afteranimate: function () {
                        console.log('-4-> ', rectangles.items[0].getBBox().x);
                    }
                }
            });
        }, 2000)


    });
</script>

</body>
</html>